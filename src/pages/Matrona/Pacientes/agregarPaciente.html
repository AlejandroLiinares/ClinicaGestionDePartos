<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Añadir Paciente - Matrona</title>

    <!-- CSS NORMALIZE-->
    <link rel="stylesheet" href="../../../styles/normalize.css" />

    <!-- CSS Global-->
    <link rel="stylesheet" href="../../../styles/global.css" />

    <!-- CSS Topbar -->
    <link rel="stylesheet" href="../../../styles/topbar.css" />

    <!-- CSS Menu de navegación -->
    <link rel="stylesheet" href="../../../styles/sidebar.css" />

    <!-- CSS Cards -->
    <link rel="stylesheet" href="../../../styles/cards.css" />

    <!-- CSS Form -->
    <link rel="stylesheet" href="../../../styles/form.css" />

    <!-- JS Tema -->
    <script src="../../../scripts/sub-themes.js" defer></script>

    <!-- JS DROPDOWN  -->
    <script src="../../../scripts/profile-dropdown.js" defer></script>

    <!-- SVG Favicon  -->
    <link rel="icon" type="image/svg+xml" href="/src/assets/svg/pregnant.svg">
</head>

<body>

<header class="top-header">
    
    <a href="../../../../index.html" class="nav__logo header-pill">
        <img src="../../../assets/icons/logo.png" alt="Logo" class="nav__logo-icon"
        width="90px" height="55px"/>
    </a>

    <div class="topbar-search header-pill">
        <img src="../../../assets/svg/buscar.svg" class="nav-svg" alt="Buscar"/>
        <input type="text" class="search-input" placeholder="Buscar en el sistema...">
    </div>

    <div class="actions-group header-pill">
        <button id="themeToggle" class="action-btn" aria-label="Cambiar tema">
            <img id="themeIcon" src="../../../assets/svg/moon.svg" alt="Tema" />
        </button>

        <button class="action-btn" aria-label="Correo TI">
            <img src="../../../assets/svg/correo.svg" alt="Correo TI" class="nav-svg"/>
        </button>

        <button class="action-btn" aria-label="Cerrar sesión">
            <img src="../../../assets/svg/salir.svg" alt="Cerrar sesión" class="nav-svg"/>
        </button>
    </div>

    <div class="profile-container header-pill">
        <img width="35" height="35" title="Foto de perfil"
        alt="Foto perfil" class="profile-photo"
        src="../../../assets/icons/matronaicon.png"/>

        <div class="profile-text">
            <span class="profile-name">Matrona Ana María</span>
            <span class="profile-email">ana.maria@clinica.cl</span>
        </div>

        <button class="dropdown-btn" aria-label="Más opciones">
            <img src="../../../assets/svg/flechaabajo.svg" alt="Más opciones" width="20px" height="20px"/>
        </button>

        <div class="profile-dropdown">
            <a href="../../Matrona/perfilMatrona.html">Ver mi perfil.</a>
        </div>
    </div>

</header>

<aside class="sidebar collapsed" id="sidebar">
    <nav class="nav-container">
        <a href="../inicioMatrona.html" class="nav-link active">
        <img src="../../../assets/svg/inicio.svg" class="nav-svg" />
            <span class="nav-text">Inicio</span>
        </a>

        <a href="../../Matrona/Pacientes/pacientes.html" class="nav-link">
            <img src="../../../assets/svg/paciente.svg" class="nav-svg" />
            <span class="nav-text">Pacientes</span>
        </a>

        <a href="../../Matrona/Gestaciones/gestaciones.html" class="nav-link">
            <img src="../../../assets/svg/gestacion.svg" class="nav-svg" />
            <span class="nav-text">Gestaciones</span>
        </a>

        <a href="../../Matrona/Partos/partos.html" class="nav-link">
            <img src="../../../assets/svg/parto.svg" class="nav-svg" />
            <span class="nav-text">Partos</span>
        </a>

        <a href="../../Matrona/RecienNacido/recienNacido.html" class="nav-link">
            <img src="../../../assets/svg/reciennacido.svg" class="nav-svg" />
            <span class="nav-text">Recién Nacidos</span>
        </a>

        <a href="../../Profesionales/profesionales.html" class="nav-link">
            <img src="../../../assets/svg/profesional.svg" class="nav-svg" />
            <span class="nav-text">Profesionales</span>
        </a>

        <a href="../../Turnos/turnos.html" class="nav-link">
            <img src="../../../assets/svg/turnos.svg" class="nav-svg" />
            <span class="nav-text">Turnos</span>
        </a>

        <a href="../../Usuarios/usuarios.html" class="nav-link">
            <img src="../../../assets/svg/usuarios.svg" class="nav-svg" />
            <span class="nav-text">Usuarios</span>
        </a>

        <a href="../../Supervisor/Reportes/reportes.html" class="nav-link">
            <img src="../../../assets/svg/reporte.svg" class="nav-svg" />
            <span class="nav-text">Reportes</span>
        </a>

        <a href="../../Supervisor/Auditoria/auditoria.html" class="nav-link">
            <img src="../../../assets/svg/auditoria.svg" class="nav-svg" />
            <span class="nav-text">Auditoría</span>
        </a>
    </nav>
</aside>

<main class="main-container">

    <!-- Breadcrumb -->
    <nav class="breadcrumbs">
        <a href="../inicioMatrona.html" class="link-color">Inicio</a>
        <span>›</span>
        <a href="pacientes.html" class="link-color">Pacientes</a>
        <span>›</span>
        <span>Nuevo</span>
    </nav>

<section class="form-card">
    
    <div class="form-header">
        <h2 class="form-title">Nuevo Paciente</h2>
        <p class="form-subtitle">Complete la ficha clínica. Los campos marcados son obligatorios.</p>
    </div>

    <form method="POST" class="main-form">
        <!-- {% csrf_token %}   -->

        <fieldset class="form-section">
            <legend class="section-legend">Identificación Personal</legend>
            
            <div class="form-row three-cols">
                <div class="form-group">
                    <label for="nombre">Nombres</label>
                    <input type="text" id="nombre" name="nombre" placeholder="Ej: María Paz" required 
                           value="{{ form.nombre.value|default:'' }}">
                </div>
                
                <div class="form-group">
                    <label for="primer_apellido">Primer Apellido</label>
                    <input type="text" id="primer_apellido" name="primer_apellido" required
                           value="{{ form.primer_apellido.value|default:'' }}">
                </div>
                
                <div class="form-group">
                    <label for="segundo_apellido">Segundo Apellido</label>
                    <input type="text" id="segundo_apellido" name="segundo_apellido" required
                           value="{{ form.segundo_apellido.value|default:'' }}">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="documento">Tipo de Documento</label>
                    <select id="documento" name="documento">
                        <option value="RUT" selected>RUT</option>
                        <option value="PAS">Pasaporte</option>
                        <option value="EXT">Documento Extranjero</option>
                        <option value="TMP">Sin Documento / Temporal</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="identificacion">N° Documento</label>
                    <input type="text" id="identificacion" name="identificacion" placeholder="12345678-9"
                           value="{{ form.identificacion.value|default:'' }}">
                    <span class="field-help">Si es RUT, sin puntos y con guión.</span>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="fecha_nacimiento">Fecha de Nacimiento</label>
                    <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required
                           value="{{ form.fecha_nacimiento.value|date:'Y-m-d' }}">
                </div>
                
                <div class="form-group">
                    <label for="nacionalidad">Nacionalidad</label>
                    <select id="nacionalidad" name="nacionalidad">
                        <option value="" disabled selected>Seleccione...</option>
                        {% for nacionalidad in form.fields.nacionalidad.queryset %}
                            <option value="{{ nacionalidad.id }}">{{ nacionalidad.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend class="section-legend">Datos Clínicos y Contacto</legend>

            <div class="form-row">
                <div class="form-group">
                    <label for="tipo">Tipo de Paciente</label>
                    <select id="tipo" name="tipo" required>
                        {% for tipo in form.fields.tipo.queryset %}
                            <option value="{{ tipo.id }}">{{ tipo.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="telefono">Teléfono</label>
                    <input type="tel" id="telefono" name="telefono" placeholder="Ej: 912345678"
                           value="{{ form.telefono.value|default:'' }}">
                    <span class="field-help">Para nacionales añada el 9. No requiere +56.</span>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="comuna">Comuna</label>
                    <select id="comuna" name="comuna">
                        <option value="" selected>Seleccione...</option>
                        {% for comuna in form.fields.comuna.queryset %}
                            <option value="{{ comuna.id }}">{{ comuna.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="cesfam">CESFAM</label>
                    <select id="cesfam" name="cesfam">
                        <option value="" selected>Ninguno / Desconocido</option>
                        {% for cesfam in form.fields.cesfam.queryset %}
                            <option value="{{ cesfam.id }}">{{ cesfam.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="direccion">Dirección</label>
                <input type="text" id="direccion" name="direccion" placeholder="Calle, número, depto..."
                       value="{{ form.direccion.value|default:'' }}">
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend class="section-legend">Métricas Físicas</legend>
            <div class="form-row three-cols">
                <div class="form-group">
                    <label for="peso">Peso (kg)</label>
                    <input type="number" id="peso" name="peso" step="0.01" placeholder="0.00"
                           value="{{ form.peso.value|default:'' }}">
                </div>
                
                <div class="form-group">
                    <label for="altura">Altura (cm)</label>
                    <input type="number" id="altura" name="altura" step="0.01" placeholder="0"
                           value="{{ form.altura.value|default:'' }}">
                </div>
                
                <div class="form-group">
                    <label for="actividad">Actividad Física</label>
                    <select id="actividad" name="actividad">
                        <option value="baja">Baja</option>
                        <option value="moderada">Moderada</option>
                        <option value="alta">Alta</option>
                    </select>
                </div>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend class="section-legend">Características Especiales</legend>
            
            <div class="checkbox-grid">
                <label class="checkbox-card">
                    <input type="checkbox" name="descapacitado" id="descapacitado">
                    <span class="checkbox-text">Discapacidad</span>
                </label>

                <label class="checkbox-card">
                    <input type="checkbox" name="pueblo_originario" id="pueblo_originario">
                    <span class="checkbox-text">Pueblo Originario</span>
                </label>

                <label class="checkbox-card">
                    <input type="checkbox" name="privada_de_libertad" id="privada_de_libertad">
                    <span class="checkbox-text">Privada de Libertad</span>
                </label>

                <label class="checkbox-card">
                    <input type="checkbox" name="transexual" id="transexual">
                    <span class="checkbox-text">Transexual</span>
                </label>

                <label class="checkbox-card">
                    <input type="checkbox" name="visita_guiada" id="visita_guiada">
                    <span class="checkbox-text">Visita Guiada</span>
                </label>
                
                <label class="checkbox-card">
                    <input type="checkbox" name="plan_de_parto" id="plan_de_parto">
                    <span class="checkbox-text">Plan de Parto</span>
                </label>
            </div>
        </fieldset>

        <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="history.back()">Cancelar</button>
            <button type="submit" class="btn-primary">Guardar Paciente</button>
        </div>

    </form>
</section>

</main>
</body>
</html>
