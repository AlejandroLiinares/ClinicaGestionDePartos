<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listado de Pacientes - Matrona</title>

    <!-- CSS NORMALIZE-->
    <link rel="stylesheet" href="../../../styles/normalize.css" />

    <!-- CSS Global-->
    <link rel="stylesheet" href="../../../styles/global.css" />

    <!-- CSS Topbar -->
    <link rel="stylesheet" href="../../../styles/topbar.css" />

    <!-- CSS Menu de navegación -->
    <link rel="stylesheet" href="../../../styles/sidebar.css" />

    <!-- CSS TABLES -->
    <link rel="stylesheet" href="../../../styles/table.css" />

    <!-- CSS Cards -->
    <link rel="stylesheet" href="../../../styles/cards.css" />

    <!-- CSS Form -->
    <link rel="stylesheet" href="../../../styles/form.css" />

    <!-- JS Tema -->
    <script src="../../../scripts/sub-themes.js" defer></script>

    <!-- JS DROPDOWN  -->
    <script src="../../../scripts/profile-dropdown.js" defer></script>

    <!-- SVG Favicon  -->
    <link rel="icon" type="image/svg+xml" href="/src/assets/svg/pregnant.svg">
</head>

<body>

<header class="top-header">
    
    <a href="../../../../index.html" class="nav__logo header-pill">
        <img src="../../../assets/icons/logo.png" alt="Logo" class="nav__logo-icon"
        width="90px" height="55px"/>
    </a>

    <div class="topbar-search header-pill">
        <img src="../../../assets/svg/buscar.svg" class="nav-svg" alt="Buscar"/>
        <input type="text" class="search-input" placeholder="Buscar en el sistema...">
    </div>

    <div class="actions-group header-pill">
        <button id="themeToggle" class="action-btn" aria-label="Cambiar tema">
            <img id="themeIcon" src="../../../assets/svg/moon.svg" alt="Tema" />
        </button>

        <button class="action-btn" aria-label="Correo TI">
            <img src="../../../assets/svg/correo.svg" alt="Correo TI" class="nav-svg"/>
        </button>

        <button class="action-btn" aria-label="Cerrar sesión">
            <img src="../../../assets/svg/salir.svg" alt="Cerrar sesión" class="nav-svg"/>
        </button>
    </div>

    <div class="profile-container header-pill">
        <img width="35" height="35" title="Foto de perfil"
        alt="Foto perfil" class="profile-photo"
        src="../../../assets/icons/matronaicon.png"/>

        <div class="profile-text">
            <span class="profile-name">Matrona Ana María</span>
            <span class="profile-email">ana.maria@clinica.cl</span>
        </div>

        <button class="dropdown-btn" aria-label="Más opciones">
            <img src="../../../assets/svg/flechaabajo.svg" alt="Más opciones" width="20px" height="20px"/>
        </button>

        <div class="profile-dropdown">
            <a href="../../Matrona/perfilMatrona.html">Ver mi perfil.</a>
        </div>
    </div>

</header>

<aside class="sidebar collapsed" id="sidebar">
    <nav class="nav-container">
        <a href="../inicioMatrona.html" class="nav-link active">
        <img src="../../../assets/svg/inicio.svg" class="nav-svg" />
            <span class="nav-text">Inicio</span>
        </a>

        <a href="../../Matrona/Pacientes/pacientes.html" class="nav-link">
            <img src="../../../assets/svg/paciente.svg" class="nav-svg" />
            <span class="nav-text">Pacientes</span>
        </a>

        <a href="../../Matrona/Gestaciones/gestaciones.html" class="nav-link">
            <img src="../../../assets/svg/gestacion.svg" class="nav-svg" />
            <span class="nav-text">Gestaciones</span>
        </a>

        <a href="../../Matrona/Partos/partos.html" class="nav-link">
            <img src="../../../assets/svg/parto.svg" class="nav-svg" />
            <span class="nav-text">Partos</span>
        </a>

        <a href="../../Matrona/RecienNacido/recienNacido.html" class="nav-link">
            <img src="../../../assets/svg/reciennacido.svg" class="nav-svg" />
            <span class="nav-text">Recién Nacidos</span>
        </a>

        <a href="../../Profesionales/profesionales.html" class="nav-link">
            <img src="../../../assets/svg/profesional.svg" class="nav-svg" />
            <span class="nav-text">Profesionales</span>
        </a>

        <a href="../../Turnos/turnos.html" class="nav-link">
            <img src="../../../assets/svg/turnos.svg" class="nav-svg" />
            <span class="nav-text">Turnos</span>
        </a>

        <a href="../../Usuarios/usuarios.html" class="nav-link">
            <img src="../../../assets/svg/usuarios.svg" class="nav-svg" />
            <span class="nav-text">Usuarios</span>
        </a>

        <a href="../../Supervisor/Reportes/reportes.html" class="nav-link">
            <img src="../../../assets/svg/reporte.svg" class="nav-svg" />
            <span class="nav-text">Reportes</span>
        </a>

        <a href="../../Supervisor/Auditoria/auditoria.html" class="nav-link">
            <img src="../../../assets/svg/auditoria.svg" class="nav-svg" />
            <span class="nav-text">Auditoría</span>
        </a>
    </nav>
</aside>
    
<main class="main-container">

    <nav class="breadcrumbs">
        <a href="../inicioMatrona.html" class="link-color">Inicio</a>
        <span>›</span>
        <a href="pacientes.html" class="link-color">Pacientes</a>
        <span>›</span>
        <span>Listar pacientes</span>
    </nav>

    <div class="welcome-header">
        <h1 class="main-title">Listado de Pacientes</h1>
        <p class="subtitle">Gestione los expedientes clínicos registrados en el sistema.</p>
    </div>

    <div class="layout-split">

        <aside class="filter-sidebar">
            <div class="filter-card">
                <h3 class="third-title">Búsquedas Recientes</h3>
                <ul class="recent-list">
                    <li><a href="#">Dale Daniel</a></li>
                    <li><a href="#">Aqui añades la funcion</a></li>
                    <li><a href="#">Para que te salgan</a></li>
                    <li><a href="#">Los ultimos objetos</a></li>
                    <li><a href="#">Que se buscaron en el sistema</a></li>
                    <!-- Te recomiendo maximo cinco para no romper el diseño  -->
                    <button class="btn-primary">Limpiar todo</button>
                </ul>
            </div>

            <div class="filter-card">
                <h3 class="third-title">Filtrar por Estado</h3>
                <label class="checkbox-card small">
                    <input type="checkbox"> <span>Gestantes</span>
                </label>
                <label class="checkbox-card small">
                    <input type="checkbox"> <span>Puérperas</span>
                </label>
            </div>
        </aside>

        <section class="list-content">

            <div class="table-actions-bar">
                <div class="topbar-search header-pill">
                    <input type="text" class="search-input" placeholder="Filtre por run, nombre o cesfam...">
                    <img src="../../../assets/svg/buscar.svg" class="nav-svg" alt="Buscar"/>
                </div>

                <button onclick="location.href='agregarPaciente.html'"
                class="btn-primary">Agregar Paciente</button>
            </div>

            <div class="table-container">
                <table class="smart-table">
                    <thead>
                        <tr>
                            <th>RUN</th>
                            <th>Nombre y (2° Apellido)</th>
                            <th>Tipo paciente</th>
                            <th>CESFAM</th>
                            <th class="text-right">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for paciente in pacientes %}
                        <tr>
                            <td>
                                <div class="td-content">
                                    <span class="text-bold">{{ paciente.identificacion }}</span>
                                    <span class="text-sub">{{ paciente.documento }}</span>
                                </div>
                            </td>
                            <td>
                                <div class="user-info">
                                    <div class="avatar-circle">{{ paciente.nombre|slice:":1" }}</div>
                                    <span class="text-main">{{ paciente.obtener_nombre_completo }}</span>
                                </div>
                            </td>
                            <td>{{ paciente.calcular_edad_paciente }} años</td>
                            <td>
                                <span class="status-badge {{ paciente.tipo.nombre|lower }}">
                                    {{ paciente.tipo.nombre }}
                                </span>
                            </td>
                            <td>{{ paciente.nacionalidad.nombre }}</td>
                            
                            <td class="text-right">
                                <div class="action-buttons">
                                    <a href="#" class="btn-icon-sm" title="Ver Ficha">
                                        <img src="../../assets/svg/eye.svg" alt="Ver">
                                    </a>
                                    <a href="#" class="btn-icon-sm" title="Editar">
                                        <img src="../../assets/svg/edit.svg" alt="Editar">
                                    </a>
                                    <a href="#" class="btn-icon-sm delete" title="Eliminar">
                                        <img src="../../assets/svg/trash.svg" alt="Eliminar">
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="6" class="empty-state">
                                No se encontraron pacientes registrados.
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

        </section>
    </div>

</main>

</body>
</html>
